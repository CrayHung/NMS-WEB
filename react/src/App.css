/* App.css - cleaned & consolidated
   - 保留：header / sidebar (vertical & horizontal) / main-content / map / modal / responsive
   - 重點：submenu 為靜態流（緊接在 Service 下方），覆蓋掉可能把父項變成「卡片」的樣式
*/

/* ===== 變數 ===== */
:root {
  --header-h: 60px;
  --content-pad: 20px;
  --card-gap: 20px;
  --sidebar-w: 220px;
  --sidebar-horiz-h: 56px;
  --map-min-width: 420px;
  --header-bg: #1abc9c;
  --sidebar-bg: linear-gradient(180deg,#0f1724,#111827);
  --card-bg: #fff;
}

/* ===== Reset / base ===== */
html, body, #root { height: 100%; margin: 0; padding: 0; }
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: #f5f6fa;
  color: #333;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  box-sizing: border-box;
}

/* ===== Header ===== */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  height: var(--header-h);
  background: var(--header-bg);
  padding: 0 var(--content-pad);
  box-sizing: border-box;
  z-index: 300;
}
.header-title { color: #fff; margin: 0; }
.header-icons { display:flex; align-items:center; gap:8px; color:#fff; }

/* ===== App layout (body) ===== */
.app-body {
  display: flex;
  flex-direction: row;
  min-height: 100vh;
  box-sizing: border-box;
}

/* ===== Sidebar (desktop vertical & mobile horizontal) ===== */
.sidebar {
  box-sizing: border-box;
  background: var(--sidebar-bg);
  color: #fff;
  padding: 12px;
  overflow: auto;
  transition: width .18s ease, height .18s ease;
  z-index: 250; /* < modal z-index */
}

/* desktop vertical */
.sidebar.vertical {
  width: var(--sidebar-w);
  flex: 0 0 var(--sidebar-w);
  display: flex;
  flex-direction: column;
  align-items: stretch;
}

/* mobile horizontal */
@media (max-width: 1024px) {
  .sidebar {
    width: 100%;
    flex: 0 0 auto;
    height: var(--sidebar-horiz-h);
    padding: 6px 8px;
    display: flex;
    align-items: center;
    overflow-x: auto;
  }
  .sidebar-nav { display:flex; gap:8px; align-items:center; padding:0 6px; width:100%; }
  /* 若只要 icon，可隱藏文字 */
  .sidebar.horizontal .nav-text { display: none; }
}

/* Sidebar nav and items */
.sidebar-nav { padding: 8px 12px; box-sizing: border-box; }
.sidebar-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  color: #e6eef8;
  text-decoration: none;
  font-weight: 700;
  white-space: nowrap;
  transition: background .12s ease, box-shadow .12s ease;
  width: 100%;
  box-sizing: border-box;
  position: relative;
}
.sidebar-item:hover { background: rgba(255,255,255,0.02); }

/* active style with left color bar */
.sidebar-item.active {
  background: rgba(255,255,255,0.04);
  box-shadow: 0 8px 20px rgba(2,6,23,0.35);
  font-weight: 800;
}
.sidebar-item.active::before {
  content: "";
  position: absolute; left: 0; top: 6px; bottom: 6px; width: 6px; border-radius:6px;
  background: linear-gradient(180deg,#60a5fa,#7c3aed);
}

/* icon & text */
.nav-icon { flex: 0 0 26px; display: inline-flex; justify-content:center; align-items:center; font-size:18px; color:#cbd5e1; }
.nav-text { display:inline-block; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; font-size:14px; }

/* nav-pill compatibility (keep previous rules but ensure block layout) */
.nav-pill { display:flex; align-items:center; gap:10px; padding:12px 16px; text-decoration:none; color:inherit; border-radius:14px; }

/* ===== Parent item + submenu (static flow) ===== */
/* Important: ensure parent is not rendered as a "card" - remove background/padding that could create big box */
.sidebar-item.parent {
  display: block;
  margin: 0;
  padding: 0;
  border-radius: 0;
  background: transparent;
  border: none;
  box-shadow: none;
}

/* parent button row */
.parent-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: transparent;
  border: none;
  color: inherit;
  cursor: pointer;
  justify-content: space-between;
  box-sizing: border-box;
}
.parent-btn .caret { margin-left: auto; font-size:12px; opacity:0.85; }

/* Submenu: static, placed immediately after parent button (not absolute) */
.submenu {
  display: block;
  max-height: 0;
  overflow: hidden;
  transition: max-height 180ms ease, opacity 140ms ease, padding 140ms ease;
  opacity: 0;
  padding: 0;
  margin: 0;
}
/* open state */
.submenu.open {
  max-height: 400px; /* 足夠放下子項 */
  opacity: 1;
  padding: 6px 0 10px 8px;
}

/* sub-item styling */
.sub-item, .nav-pill.sub-item {
  display: block;
  padding: 8px 18px;
  font-size: 14px;
  color: #e6e6e6;
  text-decoration: none;
  border-radius: 6px;
  margin: 2px 8px;
}
.sub-item:hover { background: rgba(255,255,255,0.04); color: #fff; }
.sub-item.active { background: rgba(255,255,255,0.06); font-weight:700; color:#fff; }

/* ensure submenu hidden on horizontal mobile if desired */
.sidebar.horizontal .submenu { display: none; }

/* ===== Main content ===== */
.main-content {
  flex: 1 1 auto;
  padding: var(--content-pad);
  box-sizing: border-box;
  min-width: 0;
}

/* Dashboard grid (map + side filter) */
.dashboard-grid {
  display: flex;
  gap: var(--card-gap);
  /* padding: var(--content-pad); */
  flex-wrap: wrap;
  align-items: stretch;
}

/* map-card & map-container */
/* .map-card {
  flex: 1 1 0;
  min-width: var(--map-min-width);
  display: flex;
  flex-direction: column;
} */
.map-card {
  flex: 1 1 0;
  min-width: var(--map-min-width);
  display: flex;
  flex-direction: column;
  height: calc(100vh - var(--header-h) - 2*var(--content-pad)); /* 固定高度 */
}
.map-card p { margin: 6px 0 10px; }
.map-container {
  width: 100%;
  height: clamp(280px, calc(100vh - var(--header-h) - 180px), 820px);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  flex: 1 1 auto;
}

/* right filter card */
.map-filter-card {
  width: 300px;
  max-height: calc(100vh - var(--header-h) - 2*var(--content-pad));
  overflow: auto;
}

/* ===== Card common ===== */
.card {
  background: var(--card-bg);
  border-radius: 8px;
  padding: 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  margin-bottom: var(--card-gap);
}

/* table, logs, buttons */
table { width:100%; border-collapse: collapse; margin-top:10px; }
th, td { border: 1px solid #ddd; padding:8px; }
th { background: #1abc9c; color:#fff; }
tr:nth-child(even) { background:#f2f2f2; }

button {
  background: #1abc9c; color:#fff; border: none;
  padding: 6px 12px; border-radius:4px; cursor:pointer;
}
button:hover { background:#16a085; }

/* small visual polish */
.logo { height:6em; padding:1.5em; will-change: filter; transition: filter 300ms; }
.logo:hover { filter: drop-shadow(0 0 2em #646cffaa); }

/* ===== Google Maps InfoWindow tweaks ===== */
.gm-style .gm-style-iw-tc { display: none !important; }
.gm-style .gm-style-iw-c {
  box-shadow: none !important;
  border-radius: 12px !important;
  padding: 0 !important;
  border: none !important;
  overflow: visible !important;
  background: transparent !important;
}
.gm-ui-hover-effect { display: none !important; }
.gm-style .gm-style-iw-d { overflow: visible !important; max-height: none !important; }

/* ===== Modal overlay & dialog ===== */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.45);
  display: grid; place-items: center; z-index: 9999;
}
.modal-card {
  width: 85vw; height: 85vh; max-width:1200px; max-height:920px;
  overflow: hidden; padding:16px; display:flex; flex-direction:column;
  background:#fff; border-radius:8px; box-shadow:0 12px 40px rgba(2,6,23,0.6);
  z-index: 10000;
}
.modal-card > .modal-body { overflow-y:auto; flex:1; }

/* ===== Responsive adjustments ===== */
@media (max-width: 1024px) {
  .dashboard-grid { flex-direction: column; }
  .map-card { min-width: 0; }
  .map-container { height: clamp(260px, calc(100vh - var(--header-h) - 220px), 760px); }
  .map-filter-card { width: auto; max-height: none; }
  .header { flex-direction: column; align-items: flex-start; padding:10px; height: auto; }
  .header-title { margin-bottom: px; }
}

@media (max-width: 640px) {
  .map-container { height: clamp(240px, 65vh, 720px); }
}

@media (max-width: 420px) {
  .sidebar { padding: 6px; }
  .sidebar .sidebar-item { padding: 6px 8px; min-width: 44px; }
}

/* small helpers kept from original */
.header-nav { display:flex; align-items:center; gap:16px; }
.header-nav .nav-link { color:#fff; text-decoration:none; font-weight:500; opacity:0.9; }
.header-nav .nav-link:hover { opacity:1; text-decoration:underline; }

/* ensure .nav-pill remains usable as inline pill if used elsewhere */
.nav-pill { gap:10px; display:inline-flex; align-items:center; }

/* small accessibility polish */
.sidebar .sidebar-item { outline: none; }

/* End cleaned App.css */



/* 統計卡片 header */
.stat-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 16px;
}

.stat-title {
  font-size: 18px;
  font-weight: 700;
  color: #2f4f3a;
  margin: 0;
}

/* 圓形圖示背景 */
.stat-icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #1abc9c;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

/* grid 讓數字對齊 */
.stat-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  text-align: center;
}

.stat-box {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-label {
  font-size: 13px;
  color: #6b7280;
  font-weight: 600;
  margin-bottom: 4px;
}

.stat-value {
  font-size: 22px;
  font-weight: 700;
  color: #333;
}

/* 狀態顏色 */
.stat-label.online,
.stat-value.online {
  color: green;
}
.stat-label.offline,
.stat-value.offline {
  color: red;
}
